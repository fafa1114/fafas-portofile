<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <title> æˆ‘çš„å°ˆæ¡ˆåˆ—è¡¨</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <style>
      body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        margin: 0;
        padding: 0;
        background: #f5f5f5;
        color: #222;
      }

      header {
        background: #111827;
        color: #f9fafb;
        padding: 16px 24px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      header h1 {
        margin: 0;
        font-size: 20px;
      }

      header nav a {
        color: #e5e7eb;
        margin-left: 16px;
        text-decoration: none;
        font-size: 14px;
      }

      header nav a:hover {
        text-decoration: underline;
      }

      main {
        max-width: 900px;
        margin: 24px auto;
        padding: 0 16px 32px;
      }

      h2 {
        margin-top: 0;
        font-size: 24px;
      }

      #status {
        margin: 8px 0 16px;
        font-size: 14px;
        color: #6b7280;
      }

      #projects {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: 16px;
      }

      .project-card {
        background: #ffffff;
        border-radius: 10px;
        padding: 16px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.06);
        border: 1px solid #e5e7eb;
        display: flex;
        flex-direction: column;
        height: 100%;
      }

      .project-card h3 {
        margin: 0 0 8px;
        font-size: 18px;
        color: #111827;
      }

      .project-card p {
        margin: 0 0 6px;
        font-size: 14px;
        line-height: 1.5;
        color: #374151;
      }

      .project-card a {
        margin-top: auto;
        align-self: flex-start;
        font-size: 14px;
        color: #2563eb;
        text-decoration: none;
      }

      .project-card a:hover {
        text-decoration: underline;
      }

      .tag-list {
        margin-top: 6px;
        font-size: 12px;
        color: #6b7280;
      }

      footer {
        text-align: center;
        padding: 16px;
        font-size: 12px;
        color: #9ca3af;
      }
    </style>
  </head>
  <body>
    <header>
      <h1> æˆ‘çš„å€‹äººç¶²ç«™</h1>
      <nav>
        <a href="index.html">Home</a>
        <a href="projects.html">Projects</a>
        <a href="about.html">About</a>
      </nav>
    </header>

    <main>
      <h2>Projects</h2>
      <div id="status">è¼‰å…¥ä¸­...</div>
      <div id="projects"></div>
    </main>

    <footer>Powered by GitHub Pages + Supabase</footer>

    <!-- ğŸš€ JSï¼šå¾ Supabase è®€å– projects -->
    <script type="module">
      // 1ï¸âƒ£ å…ˆå¼•å…¥ supabase-js
      import { createClient } from "https://esm.sh/@supabase/supabase-js@2";

      // 2ï¸âƒ£ å¡«å…¥ä½ è‡ªå·±çš„ Supabase å°ˆæ¡ˆè³‡è¨Š
      // åœ¨ Supabase å°ˆæ¡ˆ â†’ Project Settings â†’ API è£¡é¢å¯ä»¥æ‰¾åˆ°
      const supabaseUrl = "https://zoinczmfktyoenvajaup.supabase.co"; // <-- æ”¹é€™å€‹(æ‰¾project id)
      const supabaseAnonKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpvaW5jem1ma3R5b2VudmFqYXVwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQwNzY5MjcsImV4cCI6MjA3OTY1MjkyN30.jziRzMaL_esl52Y_Juyzk3i2RLmPdxytm14DDJsMC6k"; // <-- å†æ”¹é€™å€‹(æ‰¾api key)

      const supabase = createClient(supabaseUrl, supabaseAnonKey);

      async function loadProjects() {
        const statusEl = document.getElementById("status");
        const container = document.getElementById("projects");
        statusEl.textContent = "è¼‰å…¥ä¸­...";

        // 3ï¸âƒ£ å¾ projects table æŠŠè³‡æ–™æŠ“å‡ºä¾†
        const { data, error } = await supabase
          .from("projects")
          .select("*")
          .order("created_at", { ascending: false });

        if (error) {
          console.error("Error loading projects:", error);
          statusEl.textContent = "è¼‰å…¥å¤±æ•— QQï¼Œè«‹æ‰“é–‹ F12 çœ‹ console éŒ¯èª¤ã€‚";
          return;
        }

        if (!data || data.length === 0) {
          statusEl.textContent = "ç›®å‰é‚„æ²’æœ‰ä»»ä½•å°ˆæ¡ˆï¼Œå¯ä»¥å…ˆåˆ° Supabase æ–°å¢å¹¾ç­†è³‡æ–™ã€‚";
          container.innerHTML = "";
          return;
        }

        statusEl.textContent = ""; // æ¸…æ‰æ–‡å­—
        container.innerHTML = "";

        // 4ï¸âƒ£ æŠŠæ¯ä¸€ç­†å°ˆæ¡ˆè®Šæˆä¸€å¼µå¡ç‰‡
        data.forEach((p) => {
          const div = document.createElement("div");
          div.className = "project-card";

          div.innerHTML = `
            <h3>${p.title}</h3>
            <p>${p.description || ""}</p>
            <p><b>Tech:</b> ${p.tech_stack || "-"}</p>
            ${
              p.link
                ? `<a href="${p.link}" target="_blank" rel="noopener noreferrer">ğŸ”— View project</a>`
                : ""
            }
          `;

          container.appendChild(div);
        });
      }

      // 5ï¸âƒ£ é€²é é¢å°±è‡ªå‹•è¼‰å…¥
      loadProjects();
    </script>
  </body>
</html>

